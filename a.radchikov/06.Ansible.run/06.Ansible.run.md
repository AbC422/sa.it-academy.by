# 06.Ansible.run
## Playbook to display parameters from remote host
```bash
devops@ansible:~/ansible$ ansible-playbook -i hosts.yaml display_hosts.yaml

PLAY [work_hosts] ********************************************************************************************************************************************************

TASK [Gathering Facts] ***************************************************************************************************************************************************
Monday 26 July 2021  23:06:50 +0000 (0:00:00.029)       0:00:00.030 *********** 
ok: [ubuntu]
ok: [centos]

TASK [OS Distribution & Version] *****************************************************************************************************************************************
Monday 26 July 2021  23:06:52 +0000 (0:00:01.884)       0:00:01.914 *********** 
ok: [centos] => {
    "msg": "OS CentOS 8.4 "
}
ok: [ubuntu] => {
    "msg": "OS Ubuntu 20.04 "
}

TASK [mounts stats] ******************************************************************************************************************************************************
Monday 26 July 2021  23:06:52 +0000 (0:00:00.063)       0:00:01.980 *********** 
ok: [centos] => {
    "msg": "mount on ' / ' capasity size  62.0 GB | used 4 %"
}
ok: [ubuntu] => {
    "msg": "mount on ' / ' capasity size  61.0 GB | used 9 %"
}

TASK [RAM stats] *********************************************************************************************************************************************************
Monday 26 July 2021  23:06:52 +0000 (0:00:00.061)       0:00:02.042 *********** 
ok: [centos] => {
    "msg": "RAM total 15833 MB | free 14069 MB"
}
ok: [ubuntu] => {
    "msg": "RAM total 16013 MB | free 14684 MB"
}

PLAY RECAP ***************************************************************************************************************************************************************
centos                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
ubuntu                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

Monday 26 July 2021  23:06:52 +0000 (0:00:00.064)       0:00:02.106 *********** 
=============================================================================== 
Gathering Facts --------------------------------------------------------------------------------------------------------------------------------------------------- 1.88s
OS Distribution & Version ----------------------------------------------------------------------------------------------------------------------------------------- 0.07s
RAM stats --------------------------------------------------------------------------------------------------------------------------------------------------------- 0.06s
mounts stats ------------------------------------------------------------------------------------------------------------------------------------------------------ 0.06s
Playbook run took 0 days, 0 hours, 0 minutes, 2 seconds

```

## Playbook for the Ansible user 
```bash
devops@ansible:~/ansible$ ansible-playbook -i hosts.yaml useradd.yaml -e group=work_hosts -e user_to_add=test

PLAY [work_hosts] ********************************************************************************************************************************************************

TASK [Gathering Facts] ***************************************************************************************************************************************************
Monday 26 July 2021  23:01:45 +0000 (0:00:00.043)       0:00:00.043 *********** 
ok: [centos]
ok: [ubuntu]

TASK [Print variable] ****************************************************************************************************************************************************
Monday 26 July 2021  23:01:48 +0000 (0:00:03.171)       0:00:03.214 *********** 
ok: [centos] => {
    "msg": "You requested user test"
}
ok: [ubuntu] => {
    "msg": "You requested user test"
}

TASK [Creating user test] ************************************************************************************************************************************************
Monday 26 July 2021  23:01:48 +0000 (0:00:00.034)       0:00:03.249 *********** 
changed: [ubuntu]
changed: [centos]

TASK [Add authorized keys] ***********************************************************************************************************************************************
Monday 26 July 2021  23:01:50 +0000 (0:00:01.673)       0:00:04.923 *********** 
changed: [ubuntu]
changed: [centos]

TASK [Check] *************************************************************************************************************************************************************
Monday 26 July 2021  23:01:51 +0000 (0:00:01.013)       0:00:05.937 *********** 
changed: [ubuntu]
changed: [centos]

TASK [debug] *************************************************************************************************************************************************************
Monday 26 July 2021  23:01:52 +0000 (0:00:00.929)       0:00:06.867 *********** 
ok: [centos] => {
    "msg": [
        "test:x:1003:1003:Managed by ansible:/home/test:/bin/bash",
        "Mon Jul 26 23:01:51 UTC 2021"
    ]
}
ok: [ubuntu] => {
    "msg": [
        "test:x:1003:1003:Managed by ansible:/home/test:/bin/sh",
        "Mon 26 Jul 2021 11:01:51 PM UTC"
    ]
}

TASK [Create /etc/sudoers.d/user file] ***********************************************************************************************************************************
Monday 26 July 2021  23:01:52 +0000 (0:00:00.042)       0:00:06.910 *********** 
changed: [ubuntu]
changed: [centos]

TASK [Add to sudoers Ubuntu] *********************************************************************************************************************************************
Monday 26 July 2021  23:01:53 +0000 (0:00:00.963)       0:00:07.873 *********** 
skipping: [centos]
changed: [ubuntu]

TASK [Add to sudoers CentOS] *********************************************************************************************************************************************
Monday 26 July 2021  23:01:53 +0000 (0:00:00.687)       0:00:08.560 *********** 
skipping: [ubuntu]
changed: [centos]

TASK [Upgrade Ubuntu by "test"] ******************************************************************************************************************************************
Monday 26 July 2021  23:01:54 +0000 (0:00:00.836)       0:00:09.397 *********** 
skipping: [centos]
[WARNING]: Using world-readable permissions for temporary files Ansible needs to create when becoming an unprivileged user. This may be insecure. For information on
securing this, see https://docs.ansible.com/ansible/become.html#becoming-an-unprivileged-user
[WARNING]: Consider using 'become', 'become_method', and 'become_user' rather than running sudo
changed: [ubuntu]

TASK [Upgrade CentOS by "test"] ******************************************************************************************************************************************
Monday 26 July 2021  23:01:56 +0000 (0:00:01.921)       0:00:11.318 *********** 
skipping: [ubuntu]
[WARNING]: Module remote_tmp /home/test/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To avoid
this, create the remote_tmp dir with the correct permissions manually
changed: [centos]

TASK [Remove user test] **************************************************************************************************************************************************
Monday 26 July 2021  23:01:58 +0000 (0:00:01.903)       0:00:13.221 *********** 
changed: [ubuntu]
changed: [centos]

PLAY RECAP ***************************************************************************************************************************************************************
centos                     : ok=10   changed=7    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
ubuntu                     : ok=10   changed=7    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   

Monday 26 July 2021  23:01:59 +0000 (0:00:01.258)       0:00:14.480 *********** 
=============================================================================== 
Gathering Facts --------------------------------------------------------------------------------------------------------------------------------------------------- 3.17s
Upgrade Ubuntu by "test" ------------------------------------------------------------------------------------------------------------------------------------------ 1.92s
Upgrade CentOS by "test" ------------------------------------------------------------------------------------------------------------------------------------------ 1.90s
Creating user test ------------------------------------------------------------------------------------------------------------------------------------------------ 1.67s
Remove user test -------------------------------------------------------------------------------------------------------------------------------------------------- 1.26s
Add authorized keys ----------------------------------------------------------------------------------------------------------------------------------------------- 1.01s
Create /etc/sudoers.d/user file ----------------------------------------------------------------------------------------------------------------------------------- 0.96s
Check ------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.93s
Add to sudoers CentOS --------------------------------------------------------------------------------------------------------------------------------------------- 0.84s
Add to sudoers Ubuntu --------------------------------------------------------------------------------------------------------------------------------------------- 0.69s
debug ------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.04s
Print variable ---------------------------------------------------------------------------------------------------------------------------------------------------- 0.03s
Playbook run took 0 days, 0 hours, 0 minutes, 14 seconds

```
