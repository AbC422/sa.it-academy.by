# 06.Ansible.Run

## Playbook to display parameters from remote host

```bash
$ ansible-playbook par.yaml -i inv.yaml                 



PLAY [all_workers] *********************************************************************************

TASK [Gathering Facts] *****************************************************************************
Панядзелак 18 кастрычніка 2021  04:42:00 +0300 (0:00:00.029)       0:00:00.029 *** 
ok: [host19]
ok: [host20]

TASK [Print OS parametrs/version] ******************************************************************
Панядзелак 18 кастрычніка 2021  04:42:02 +0300 (0:00:02.242)       0:00:02.272 *** 
ok: [host19] => {
    "msg": "OS: CentOS Version: 7.9"
}
ok: [host20] => {
    "msg": "OS: Ubuntu Version: 18.04"
}

TASK [Print Mount point/capacity/used] *************************************************************
Панядзелак 18 кастрычніка 2021  04:42:03 +0300 (0:00:00.111)       0:00:02.383 *** 
ok: [host19] => {
    "msg": "Mount : / , Capacity: 21003583488 , Used: 19147407360 "
}
ok: [host20] => {
    "msg": "Mount : / , Capacity: 21003583488 , Used: 18639753216 "
}

TASK [Print RAM/capacity/free] *********************************************************************
Панядзелак 18 кастрычніка 2021  04:42:03 +0300 (0:00:00.136)       0:00:02.520 *** 
ok: [host19] => {
    "msg": "Total RAM: 4096 mb , Free RAM: 3489 mb"
}
ok: [host20] => {
    "msg": "Total RAM: 4096 mb , Free RAM: 3219 mb"
}

PLAY RECAP *****************************************************************************************
host19                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
host20                     : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

Панядзелак 18 кастрычніка 2021  04:42:03 +0300 (0:00:00.158)       0:00:02.678 *** 
=============================================================================== 
Gathering Facts ----------------------------------------------------------------------------- 2.24s
Print RAM/capacity/free --------------------------------------------------------------------- 0.16s
Print Mount point/capacity/used ------------------------------------------------------------- 0.14s
Print OS parametrs/version ------------------------------------------------------------------ 0.11s
Playbook run took 0 days, 0 hours, 0 minutes, 2 seconds
```

## Playbook for the Ansible user

```bash
$ ansible-playbook add_user.yaml -i inv.yaml -e group=all_workers -e user_to_add=test 




PLAY [all_workers] ****************************************************************************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************************************************************************
Нядзеля 24 кастрычніка 2021  00:34:44 +0300 (0:00:00.023)       0:00:00.023 *** 
ok: [host19]
ok: [host20]

TASK [Creating user test] *********************************************************************************************************************************************************************************
Нядзеля 24 кастрычніка 2021  00:34:46 +0300 (0:00:02.334)       0:00:02.358 *** 
changed: [host19]
changed: [host20]

TASK [New user authorization by SSH key] ******************************************************************************************************************************************************************
Нядзеля 24 кастрычніка 2021  00:34:48 +0300 (0:00:02.005)       0:00:04.364 *** 
ok: [host19]
ok: [host20]

TASK [add "test" to visudo] *******************************************************************************************************************************************************************************
Нядзеля 24 кастрычніка 2021  00:34:50 +0300 (0:00:01.190)       0:00:05.554 *** 
ok: [host19]
ok: [host20]

TASK [Upgrade CentOS] *************************************************************************************************************************************************************************************
Нядзеля 24 кастрычніка 2021  00:34:50 +0300 (0:00:00.952)       0:00:06.507 *** 
skipping: [host20]
changed: [host19]

TASK [Upgrade Ubuntu] *************************************************************************************************************************************************************************************
Нядзеля 24 кастрычніка 2021  00:34:52 +0300 (0:00:01.552)       0:00:08.062 *** 
skipping: [host19]
[WARNING]: Unable to use /home/test/.ansible/tmp as temporary directory, failing back to system: [Errno 13] Permission denied: '/home/test/.ansible'
changed: [host20]

TASK [Removing user test] *********************************************************************************************************************************************************************************
Нядзеля 24 кастрычніка 2021  00:34:54 +0300 (0:00:01.608)       0:00:09.671 *** 
changed: [host19]
changed: [host20]

PLAY RECAP ************************************************************************************************************************************************************************************************
host19                     : ok=6    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
host20                     : ok=6    changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   

Нядзеля 24 кастрычніка 2021  00:34:56 +0300 (0:00:02.666)       0:00:12.337 *** 
=============================================================================== 
Removing user test --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 2.67s
Gathering Facts ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 2.33s
Creating user test --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 2.01s
Upgrade Ubuntu ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.61s
Upgrade CentOS ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.55s
New user authorization by SSH key ------------------------------------------------------------------------------------------------------------------------------------------------------------------ 1.19s
add "test" to visudo ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.95s
Playbook run took 0 days, 0 hours, 0 minutes, 12 seconds


```